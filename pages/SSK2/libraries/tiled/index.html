<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="https://roaminggamer.github.io/RGDocs/pages/SSK2/libraries/tiled/"> 
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>Tiled Loader - Super Starter Kit 2</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../..">Super Starter Kit 2</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">About</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../extensions/">Extensions</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../globals/">Globals</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">A .. L <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../actions1/">Actions Part 1</a>
</li>

                        
                            
<li >
    <a href="../actions2/">Actions Part 2</a>
</li>

                        
                            
<li >
    <a href="../android/">Android Helpers</a>
</li>

                        
                            
<li >
    <a href="../camera/">Cameras</a>
</li>

                        
                            
<li >
    <a href="../colors/">Colors</a>
</li>

                        
                            
<li >
    <a href="../cc/">Collision Calculator</a>
</li>

                        
                            
<li >
    <a href="../dialogs/">Dialog Trays</a>
</li>

                        
                            
<li >
    <a href="../easy_inputs/">Easy Inputs</a>
</li>

                        
                            
<li >
    <a href="../easy_interfaces/">Easy Interfaces</a>
</li>

                        
                            
<li >
    <a href="../easyPositioner/">Easy Positioner</a>
</li>

                        
                            
<li >
    <a href="../display_arcs/">Factories (Arc)</a>
</li>

                        
                            
<li >
    <a href="../display_lines/">Factories (Line)</a>
</li>

                        
                            
<li >
    <a href="../display_standard/">Factories (Display Object)</a>
</li>

                        
                            
<li >
    <a href="../factorymgr/">Factory Manager</a>
</li>

                        
                            
<li >
    <a href="../files/">Files Library</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">M .. Z <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../math2D/">Math (2D)</a>
</li>

                        
                            
<li >
    <a href="../meters/">Meters</a>
</li>

                        
                            
<li >
    <a href="../misc/">Miscellaneous</a>
</li>

                        
                            
<li >
    <a href="../pex/">Particle Loaders</a>
</li>

                        
                            
<li >
    <a href="../persist/">Persistent Data</a>
</li>

                        
                            
<li >
    <a href="../points/">Points Library</a>
</li>

                        
                            
<li >
    <a href="../display_layers/">Quick Layers</a>
</li>

                        
                            
<li >
    <a href="../shufflebag/">Shuffle Bags</a>
</li>

                        
                            
<li >
    <a href="../security/">Simple Security</a>
</li>

                        
                            
<li >
    <a href="../social/">Social Helpers</a>
</li>

                        
                            
<li >
    <a href="../soundMgr/">Sound Manager</a>
</li>

                        
                            
<li >
    <a href="../system/">System</a>
</li>

                        
                            
<li class="active">
    <a href="./">Tiled Loader</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Samples <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../display_samples/">Factory Objects</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../external/">External</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../rgdocs/">RG Docs</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../system/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../display_samples/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#tiled-loader-ssktiled">Tiled Loader - ssk.tiled.*</a></li>
        
            <li class="third-level"><a href="#ponywolf-loader-versus-ssk-2-tiled-loader">Ponywolf Loader versus SSK 2 Tiled Loader</a></li>
        
            <li class="third-level"><a href="#learning-to-use-tiled">Learning To Use Tiled</a></li>
        
            <li class="third-level"><a href="#loading-level-data">Loading Level Data</a></li>
        
            <li class="third-level"><a href="#drawing-level-using-default-factories">Drawing Level Using Default Factories</a></li>
        
            <li class="third-level"><a href="#drawing-level-using-custom-factories">Drawing Level Using Custom Factories</a></li>
        
    
        <li class="first-level "><a href="#tiled-loader-helper-quick-reference">Tiled Loader Helper Quick Reference</a></li>
        
    
        <li class="first-level "><a href="#custom-factory-example">Custom Factory Example</a></li>
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="tiled-loader-ssktiled">Tiled Loader - ssk.tiled.*</h1>
<p>This module allows yout to create game scenes using the <a href="http://www.mapeditor.org/">Tiled</a> editor and then load that scene into Corona using default builder factories and/or <a href="../factorymgr/">custom factories</a> of your own design.</p>
<blockquote>
<p>This feature should be considered (somewhat) a Work In Progress at this time.</p>
<p>While I have tested it and it is very functional, I am still improving it as I use the module in my own games.  I believe there will be additional refinements and feature additions later.</p>
<p><strong>~ The Roaming Gamer</strong></p>
</blockquote>
<h2 id="ponywolf-loader-versus-ssk-2-tiled-loader">Ponywolf Loader versus SSK 2 Tiled Loader</h2>
<p>This tiled loader/tool is different from the one made by Michael Wilson (AKA <a href="http://ponywolf.com/">Ponywolf</a>) in the recent blog series: <a href="https://coronalabs.com/blog/2016/12/08/using-tiled-for-layout-and-level-design/">"Using Tiled for layout and level design."</a>  However, you can still load those same levels and operate on them with the SSK 2 Tiled Loader.</p>
<h2 id="learning-to-use-tiled">Learning To Use Tiled</h2>
<p>If you want to learn about editing levels with Tiled first, go take a look at these YouTube videos:</p>
<ol>
<li><a href="https://www.youtube.com/watch?v=LPKrDwosYHM">Using Tiled – Part 1: Installation and Tiled Basics</a></li>
<li><a href="https://www.youtube.com/watch?v=wYw02u0ZlaA">Using Tiled – Part 2: Object Layers versus Tile Layers</a></li>
<li><a href="https://www.youtube.com/watch?v=cITLF45hink">Using Tiled – Part 3: Composing Scenes</a></li>
<li><a href="https://www.youtube.com/watch?v=0ORwbEe1SCc">Using Tiled – Part 4: Custom Object Properties</a></li>
</ol>
<h2 id="loading-level-data">Loading Level Data</h2>
<p>To load a tiled 'level', you need to follow these steps:</p>
<ol>
<li>Create a level in the tiled editor.  If you don't know how to do this see <a href="#learning-to-use-tiled">Learning To Use Tiled</a> above.</li>
<li>Export that level as a LUA file.</li>
<li>Create a new 'Tiled Loader' helper object.<ul>
<li><strong>Tip:</strong> See <a href="#tiled-loader-helper-quick-reference">Tiled Loader Helper Quick Reference</a> below for a listing of the functions available on all helper objects.</li>
</ul>
</li>
<li>Set the data path for the level data.</li>
<li>Load the level data.</li>
</ol>
<pre><code class="Lua">
-- Create Tiled Loader helper object
local level = ssk.tiled.new()

-- Data file is in folder 'tests/tiled/'
level.setLevelsPath( &quot;tests/tiled&quot; )

-- Load the level file 'dummy.lua' and pass no specific extra settings.
level.load( &quot;dummy&quot; )

</code></pre>

<h2 id="drawing-level-using-default-factories">Drawing Level Using Default Factories</h2>
<p>If you simply want to draw the level on your screen, you can do so quickly with the default factories like this:</p>
<ol>
<li>Load Level Data as discussed <a href="#loading-level-data">above</a></li>
<li>Call <code>draw()</code></li>
</ol>
<pre><code class="Lua">
level.draw( scengGroup )

</code></pre>

<p>This single line of code will draw all objects in the scene with a few exceptions:</p>
<ul>
<li>Objects in a tiled 'tilelayer' are ignored.  Only 'objecgtroup' layer objects are drawn. </li>
<li>If the name of the layer (in tiled) is called 'ignore' these objects too are not-drawn.</li>
</ul>
<h2 id="drawing-level-using-custom-factories">Drawing Level Using Custom Factories</h2>
<p>While it is cool to draw the scene very fast using the built in <code>draw()</code> function, it isn't useful except for prototyping and verifying layout.</p>
<p>The better way is to use <a href="../factorymgr/">Custom Factories</a>.</p>
<blockquote>
<p>This part of the documentation needs improvement.  For now, please see the full example at the bottom of the page and also see it running in the validation test that comes with SSK2:</p>
<p>'Tiled Loader Test #1' </p>
<p><strong>~ The Roaming Gamer</strong></p>
</blockquote>
<h1 id="tiled-loader-helper-quick-reference">Tiled Loader Helper Quick Reference</h1>
<table>
<thead>
<tr>
<th>Syntax</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#loading-level-data">loader.setLevelsPath(levelpath)</a></td>
<td>Set the path to all level files.</td>
</tr>
<tr>
<td><a href="#loading-level-data">loader.load(path)</a></td>
<td>Load a named level file from the <code>levelpath/path</code>.  Be sure to exclude the <code>.lua</code> extension.</td>
</tr>
<tr>
<td>loader.drawObj(group,rec)</td>
<td>Draw the object represented by <code>rec</code> using the default factory object builder and place it in <code>group</code>.</td>
</tr>
<tr>
<td><a href="#drawing-level-using-default-factories">loader.draw(group)</a></td>
<td>Draw all objects in the level using the default factory object builder and place them in <code>group</code>.</td>
</tr>
<tr>
<td>loader.forEach(func)</td>
<td>Call <code>func( rec, index )</code> for each object in the level.  <code>rec</code> is the record for the current object and <code>index</code> is the numeric index (1, 2, 3, ...) of that object in the level table.</td>
</tr>
<tr>
<td>loader.getWidth()</td>
<td>Get the calculated width of the tiled level.</td>
</tr>
<tr>
<td>loader.getHeight()</td>
<td>Get the calculated height of the tiled level.</td>
</tr>
<tr>
<td>loader.getImages()</td>
<td>Get a table of records containing information about each textured used in the level, its path, width, and height.</td>
</tr>
<tr>
<td>loader.getImage(gid)</td>
<td>Using the GID value from a object record, request the texture record used by that object which includes the path to the <code>image</code>, and the <code>width</code> and <code>height</code> of that texture.</td>
</tr>
<tr>
<td>loader.getImagePath(gid)</td>
<td>Using the GID value from a object record, request the path for the textured used by that object.</td>
</tr>
<tr>
<td>loader.getRecords()</td>
<td>Returns a list of all object records in the tiled level.</td>
</tr>
</tbody>
</table>
<h1 id="custom-factory-example">Custom Factory Example</h1>
<pre><code class="Lua">
local RGTiled = ssk.tiled

-- =============================================================
local test = {}

function test.run( group, params )
   group = group or display.currentStage
   params = params or {}

   -- Create some basic layers.
   --
   local layers = quickLayers( group, 
         &quot;underlay&quot;,
         &quot;world&quot;,
            { &quot;background&quot;, &quot;content&quot;, &quot;foreground&quot; },
         &quot;overlay&quot; )   

   --table.dump(RGTiled, nil, &quot;RGTiled&quot;)   
   local level = RGTiled.new()

   --table.dump(level, nil, &quot;level&quot;)   
   level.setLevelsPath( &quot;tests/tiled&quot; )

   level.load( &quot;dummy&quot;, {} )

   --table.dump(level, nil, &quot;level loaded&quot;)   

   local objects = level.getRecords()
   --table.dump(objects,nil,&quot;objects&quot;)

   local images = level.getImages()
   --table.dump(images,nil,&quot;images&quot;)

   local function simpleSpinner( obj )
      obj.rotation = 0
      obj.onComplete = simpleSpinner
      local rec = obj.rec
      local properties = obj.rec.properties
      transition.to( obj, { rotation = 360, time = properties.rotTime or 1000, onComplete = obj } )
   end

   local function func( rec, num )
      local img = level.getImage( rec.gid )
      local obj = newImageRect( layers[rec.layer], rec.x, rec.y, img.image, 
         { w = rec.width, h = rec.height, rec = rec }  )
      if( rec.flip.x ) then obj.xScale = -obj.xScale end
      if( rec.flip.y ) then obj.yScale = -obj.yScale end
      --table.dump(rec)

      if(rec.name == &quot;spinner&quot;) then
         simpleSpinner( obj )
      end

   end

   level.forEach( func )
end

return test


</code></pre>

<hr />
<p><img alt="RoamingGamer" src="../../roaming_gamer_small.png" />  Copyright &copy; Roaming Gamer, LLC. 2008-2016; All Rights Reserved </p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Copyright © 2008, 2017 Roaming Gamer, LLC.<br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
