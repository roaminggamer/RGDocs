<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://roaminggamer.github.io/RGDocs/pages/SSK2/libraries/actions2/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Actions Lib - Part 2 - Super Starter Kit 2</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Super Starter Kit 2</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">About</a>
                    </li>
                    <li >
                        <a href="../../extensions/">Extensions</a>
                    </li>
                    <li >
                        <a href="../../globals/">Globals</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Lite <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../math2D/">2D Math</a>
</li>
                            
<li >
    <a href="../actions1/">Actions Lib - Part 1</a>
</li>
                            
<li class="active">
    <a href="./">Actions Lib - Part 2</a>
</li>
                            
<li >
    <a href="../camera/">Cameras</a>
</li>
                            
<li >
    <a href="../colors/">Colors</a>
</li>
                            
<li >
    <a href="../cc/">Collision Calculator</a>
</li>
                            
<li >
    <a href="../dialogs/">Dialog Trays</a>
</li>
                            
<li >
    <a href="../easy_inputs/">Easy Inputs</a>
</li>
                            
<li >
    <a href="../easy_interfaces/">Easy Interfaces</a>
</li>
                            
<li >
    <a href="../display_standard/">Factories (Display Object)</a>
</li>
                            
<li >
    <a href="../factorymgr/">Factory Manager</a>
</li>
                            
<li >
    <a href="../misc/">Miscellaneous</a>
</li>
                            
<li >
    <a href="../pex/">Particle Loaders</a>
</li>
                            
<li >
    <a href="../display_layers/">Quick Layers</a>
</li>
                            
<li >
    <a href="../system/">System</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Pro <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../android/">Android Helpers</a>
</li>
                            
<li >
    <a href="../easyPositioner/">Easy Positioner</a>
</li>
                            
<li >
    <a href="../display_arcs/">Factories (Arc)</a>
</li>
                            
<li >
    <a href="../display_lines/">Factories (Line)</a>
</li>
                            
<li >
    <a href="../files/">Files Library</a>
</li>
                            
<li >
    <a href="../meters/">Meters</a>
</li>
                            
<li >
    <a href="../persist/">Persistent Data</a>
</li>
                            
<li >
    <a href="../points/">Points Library</a>
</li>
                            
<li >
    <a href="../security/">Simple Security</a>
</li>
                            
<li >
    <a href="../shufflebag/">Shuffle Bags</a>
</li>
                            
<li >
    <a href="../social/">Social Helpers</a>
</li>
                            
<li >
    <a href="../soundMgr/">Sound Manager</a>
</li>
                            
<li >
    <a href="../tiled/">Tiled Loader</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Samples <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../display_samples/">Factory Objects</a>
</li>
                        </ul>
                    </li>
                    <li >
                        <a href="../../external/">External</a>
                    </li>
                    <li >
                        <a href="../../rgdocs/">RG Docs</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../actions1/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../camera/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#actions-library-sskactions-part2">Actions Library (ssk.actions.*)  (Part2)</a></li>
        <li class="main "><a href="#scene-wrapping-scene">Scene Wrapping (scene.*)</a></li>
            <li><a href="#scenerectwrap">scene.rectWrap</a></li>
            <li><a href="#scenecircwrap">scene.circWrap</a></li>
        <li class="main "><a href="#target-acquisition-target">Target Acquisition (target.*)</a></li>
            <li><a href="#targetset">target.set</a></li>
            <li><a href="#targetget">target.get</a></li>
            <li><a href="#targetacquirerandom">target.acquireRandom</a></li>
            <li><a href="#targetacquirenearest">target.acquireNearest</a></li>
            <li><a href="#targetloseondestroyed">target.loseOnDestroyed</a></li>
            <li><a href="#targetloseatmaxdistance">target.loseAtMaxDistance</a></li>
            <li><a href="#targetloseatminalpha">target.loseAtMinAlpha</a></li>
            <li><a href="#targetlosenotvisible">target.loseNotVisible</a></li>
            <li><a href="#targetdrawdebugline">target.drawDebugLine</a></li>
            <li><a href="#targetdrawdebugdistancelabel">target.drawDebugDistanceLabel</a></li>
            <li><a href="#targetdrawdebugangledistancelabel">target.drawDebugAngleDistanceLabel</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="actions-library-sskactions-part2">Actions Library (ssk.actions.*)  (Part2)</h1>
<p>The actions library is a collection of helper modules and functions to do the heavy lifting associated with smooth facing, movement, screen-wrapping, and target acquisition.  </p>
<p><img alt="GIF" src="../../images/small/actions.gif" /></p>
<p>This library is especially suited to action and arcade style game mechanics.</p>
<table>
<thead>
<tr>
<th align="center">Facing</th>
<th align="center">Non-Physics Movement</th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a href="../actions1/#face">face</a></td>
<td align="center"><a href="../actions1/#moveat">move.at</a></td>
<td align="center"><a href="../actions1/#moveforward">move.forward</a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th align="center">Physics Movement</th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a href="../actions1/#movepdampdown">movep.dampDown</a></td>
<td align="center"><a href="../actions1/#movepdamphoriz">movep.dampHoriz</a></td>
<td align="center"><a href="../actions1/#movepdampnormal">movep.dampNormal</a></td>
</tr>
<tr>
<td align="center"><a href="../actions1/#movepdampvert">movep.dampVert</a></td>
<td align="center"><a href="../actions1/#movepforward">movep.forward</a></td>
<td align="center"><a href="../actions1/#movepimpulseforward">movep.impulseForward</a></td>
</tr>
<tr>
<td align="center"><a href="../actions1/#moveplimitv">movep.limitV</a></td>
<td align="center"><a href="../actions1/#moveplimitav">movep.limitAV</a></td>
<td align="center"><a href="../actions1/#movepthrustforward">movep.thrustForward</a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th align="center">Scene</th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a href="../actions2/#scenecircwrap">scene.circWrap</a>  <a href="../actions2/#scenerectwrap">scene.rectWrap</a></td>
<td align="center"><a href="../actions2/#targetacquirerandom">target.acquireRandom</a></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th align="center">Target Acquisition</th>
<th align="center"></th>
<th align="center"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a href="../actions2/#targetdrawdebugangledistancelabel">target.drawDebugAngleDistanceLabel</a></td>
<td align="center"><a href="../actions2/#targetdrawdebugdistancelabel">target.drawDebugDistanceLabel</a></td>
<td align="center"><a href="../actions2/#targetdrawdebugline">target.drawDebugLine</a></td>
</tr>
<tr>
<td align="center"><a href="../actions2/#targetget">target.get</a></td>
<td align="center"><a href="../actions2/#targetloseatmaxdistance">target.loseAtMaxDistance</a></td>
<td align="center"><a href="../actions2/#targetloseatminalpha">target.loseAtMinAlpha</a></td>
</tr>
<tr>
<td align="center"><a href="../actions2/#targetlosenotvisible">target.loseNotVisible</a></td>
<td align="center"><a href="../actions2/#targetloseondestroyed">target.loseOnDestroyed</a></td>
<td align="center"><a href="../actions2/#targetset">target.set</a></td>
</tr>
</tbody>
</table>
<hr />
<h1 id="scene-wrapping-scene">Scene Wrapping (scene.*)</h1>
<p>Some action games use a single-screen world that wraps.  That is, if a player or enemy leaves one side of the screen, they re-enter from the other side.</p>
<p>The helper functions in this action module help you achieve this.</p>
<h2 id="scenerectwrap">scene.rectWrap</h2>
<p>This helper will wrap one object about the bounds of a rectangle (any display object).</p>
<p>This seem strange at first, but by using a display object as the proxy for wrapping calculations, we have an easy way to define the wrapping space and well as an easy way to debug this.</p>
<pre><code class="lua">ssk.actions.scene.rectWrap( objectToWrap, wrapRectangle )
</code></pre>

<ul>
<li><code>objectToWrap</code> - The object that should wrap about a 'wrapping space'.</li>
<li><code>wrapRectangle</code> - A display object to act as a proxy and define the 'wrapping space'.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">-- Create a rectangle to act as our 'wrapping bounds'
local wrapProxy = display.newRect( display.contentCenterX, display.contentCenterY, 300, 300 )

-- Show it a little so we can see where the wrap should happen
wrapProxy.alpha = 0.1 

-- Place a player in the center of the wrapProxy and give it a random velocity
local player = display.newCirle( wrapProxy.x, wrapProxy.y, 20 )

physics:addBody( player )

player:setLinearVelocity( math.random( -100, 100), math.random( -100, 100) )

-- Start an enter frame listener and test for wrapping each frame
function player.enterFrame( self )
    ssk.actions.scene.rectWrap( self, wrapProxy )
end

Runtime:addEventListener( &quot;enterFrame&quot;, player )
</code></pre>

<h2 id="scenecircwrap">scene.circWrap</h2>
<p>This helper is similar to <code>rectWrap</code>, but the wrapping is about a circular space and no proxy is required.</p>
<pre><code class="lua">ssk.actions.scene.circWrap( objectToWrap, point, radius )
</code></pre>

<ul>
<li><code>objectToWrap</code> - The object that should wrap about a 'wrapping space'.</li>
<li><code>point</code> - <code>&lt;x,y&gt;</code> position of the 'wrapping circle'.</li>
<li><code>radius</code> - Radius of the 'wrapping circle'.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">
local cx = display.contentCenterX
local cy = display.contentCenterY

-- Place a player in the center of the screen and give it a random velocity
local player = display.newCirle( cx, cy, 20 )

physics:addBody( player )

player:setLinearVelocity( math.random( -100, 100), math.random( -100, 100) )

-- Start an enter frame listener and test for wrapping each frame
function player.enterFrame( self )
    ssk.actions.scene.circWrap( self, { x = cx, y = cy }, 100 )
end

Runtime:addEventListener( &quot;enterFrame&quot;, player )
</code></pre>

<hr />
<h1 id="target-acquisition-target">Target Acquisition (target.*)</h1>
<p>In action and arcade games, there is often the need for missiles, gun turrets, enemies, etc. to acquire a target and then chase it down.</p>
<p>The functions in this actions module handle the first half of that work (target acquisition), and you can code up the second half using the <code>face</code> function in combination with <code>move</code> or <code>movep</code> functions.</p>
<h2 id="targetset">target.set</h2>
<p>This function allows you to manually assign a target to an object.</p>
<pre><code class="lua">ssk.actions.target.set( obj, newTarget )
</code></pre>

<ul>
<li><code>obj</code> - The object that will be seeking or tracking the target.</li>
<li><code>newTarget</code> - The new target for this object, or <code>nil</code> to clear the target.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">-- Have the player start targeting enemy
ssk.actions.target.set( player, enemy )
</code></pre>

<h2 id="targetget">target.get</h2>
<p>This function allows you to manually get an object's current target.  </p>
<p>Returns nil if the object has no current target.</p>
<pre><code class="lua">ssk.actions.target.get( obj )
</code></pre>

<ul>
<li><code>obj</code> - The object that may be tracking a target.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">-- Get the player's current target
local curTarget = ssk.actions.target.get( player )
</code></pre>

<h2 id="targetacquirerandom">target.acquireRandom</h2>
<p>This chooses a random target from a target pool and assigns it to <code>obj</code>.  </p>
<p>Returns <code>true</code> if a target was assigned, <code>false</code> otherwise.</p>
<pre><code class="lua">ssk.actions.target.acquireRandom( obj, params )
</code></pre>

<ul>
<li><code>obj</code> - The object to assign a target to.</li>
<li><code>params</code> - A table of key-value pairs controling the targeting algorithm.<ul>
<li><code>targets</code> - A table of targets.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">ssk.actions.target.acquireRandom( self, { targets = targets } )
</code></pre>

<h2 id="targetacquirenearest">target.acquireNearest</h2>
<p>This chooses the nearest target from a target pool and assigns it to <code>obj</code>.  </p>
<p>Returns <code>true</code> if a target was assigned, <code>false</code> otherwise.</p>
<pre><code class="lua">ssk.actions.target.acquireRandom( obj, params )
</code></pre>

<ul>
<li><code>obj</code> - The object to assign a target to.</li>
<li><code>params</code> - A table of key-value pairs controling the targeting algorithm.<ul>
<li><code>maxDist</code> (<code>math.huge</code>) - The maximum distance at which a target is considered valid.</li>
<li><code>targets</code> - A table of targets.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">ssk.actions.target.acquireRandom( self, { targets = targets } )
</code></pre>

<h2 id="targetloseondestroyed">target.loseOnDestroyed</h2>
<p>Tell <code>obj</code> to wipe its current target if that target has been destroyed and is no longer a valid display object.</p>
<p>Returns <code>true</code> if <code>obj</code> no longer has a valid target.</p>
<pre><code class="lua">ssk.actions.target.loseOnDestroyed( obj )
</code></pre>

<ul>
<li><code>obj</code> - The object whose target we want to check.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">function player.enterFrame( self )

    -- Acquire a new random target if our last one was destroyed, or
    -- if we don't have one yet.
    if( ssk.actions.target.loseOnDestroyed( self ) ) then
        ssk.actions.target.acquireRandom( self, { targets = targets } )
    end
end
</code></pre>

<h2 id="targetloseatmaxdistance">target.loseAtMaxDistance</h2>
<p>Tell <code>obj</code> to wipe its current target if that target has moved beyond <code>maxDist</code>.</p>
<p>Returns <code>true</code> if <code>obj</code> no longer has a valid target.</p>
<pre><code class="lua">ssk.actions.target.loseAtMaxDistance( obj )
</code></pre>

<ul>
<li><code>obj</code> - The object whose target we want to check.</li>
<li><code>params</code> - A table of key-value pairs controling the targeting algorithm.<ul>
<li><code>maxDist</code> (<code>math.huge</code>) - The maximum distance at which a target is considered valid.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">function player.enterFrame( self )

    -- Acquire a new random target if our last one was destroyed, or
    -- if we don't have one yet.
    if( ssk.actions.target.loseAtMaxDistance( self, { maxDist = 200 } ) ) then
        ssk.actions.target.acquireRandom( self, { targets = targets } )
    end
end
</code></pre>

<h2 id="targetloseatminalpha">target.loseAtMinAlpha</h2>
<p>Tell <code>obj</code> to wipe its current target if that target's alpha is below <code>alpha</code>.</p>
<p>Returns <code>true</code> if <code>obj</code> no longer has a valid target.</p>
<pre><code class="lua">ssk.actions.target.loseAtMinAlpha( obj )
</code></pre>

<ul>
<li><code>obj</code> - The object whose target we want to check.</li>
<li><code>params</code> - A table of key-value pairs controling the targeting algorithm.<ul>
<li><code>alpha</code> (<code>0.5</code>) - The maximum alpha at which a target is considered valid.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">function player.enterFrame( self )

    -- Acquire a new random target if our last one was destroyed, or
    -- if we don't have one yet.
    if( ssk.actions.target.loseAtMinAlpha( self, { alpha = 0.1 } ) ) then
        ssk.actions.target.acquireRandom( self, { targets = targets } )
    end
end
</code></pre>

<h2 id="targetlosenotvisible">target.loseNotVisible</h2>
<p>Tell <code>obj</code> to wipe its current target if that target is not visible.</p>
<p>Returns <code>true</code> if <code>obj</code> no longer has a valid target.</p>
<pre><code class="lua">ssk.actions.target.loseNotVisible( obj )
</code></pre>

<ul>
<li><code>obj</code> - The object whose target we want to check.</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">function player.enterFrame( self )

    -- Acquire a new random target if our last one was destroyed, or
    -- if we don't have one yet.
    if( ssk.actions.target.loseNotVisible( self ) ) then
        ssk.actions.target.acquireRandom( self, { targets = targets } )
    end
end
</code></pre>

<h2 id="targetdrawdebugline">target.drawDebugLine</h2>
<p>This is a debug feature that draws a line between <code>obj</code> and its target.</p>
<pre><code class="lua">ssk.actions.target.drawDebugLine( obj, params )
</code></pre>

<ul>
<li><code>obj</code> - The object that acts as the anchor for the line.</li>
<li><code>params</code> - A table of key-value pairs controling the targeting algorithm.<ul>
<li><code>parent</code> - By default, the line is added to <code>display.currentStage</code> group, but you can specify a another group with this argument.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">ssk.actions.target.drawDebugLine( self )
</code></pre>

<h2 id="targetdrawdebugdistancelabel">target.drawDebugDistanceLabel</h2>
<p>This is a debug feature that draws a label showing the distance from <code>obj</code> to its target in pixels.</p>
<pre><code class="lua">ssk.actions.target.drawDebugDistanceLabel( obj, params )
</code></pre>

<ul>
<li><code>obj</code> - The object that acts as the anchor for the line.</li>
<li><code>params</code> - A table of key-value pairs controling the targeting algorithm.<ul>
<li><code>parent</code> - By default, the line is added to <code>display.currentStage</code> group, but you can specify a another group with this argument.</li>
<li><code>xOffset</code> (<code>0</code>) - The label's x-position is <code>obj.x + xOffset</code>.</li>
<li><code>yOffset</code> (<code>0</code>) - The label's y-position is <code>obj.y + yOffset</code>.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">ssk.actions.target.drawDebugDistanceLabel( self, { yOffset = 40 } )
</code></pre>

<h2 id="targetdrawdebugangledistancelabel">target.drawDebugAngleDistanceLabel</h2>
<p>This is a debug feature that draws a label showing the distance from <code>obj</code> to its target in pixels, as well as the angle between <code>obj</code> forward and the target.</p>
<pre><code class="lua">ssk.actions.target.drawDebugAngleDistanceLabel( obj, params )
</code></pre>

<ul>
<li><code>obj</code> - The object that acts as the anchor for the line.</li>
<li><code>params</code> - A table of key-value pairs controling the targeting algorithm.<ul>
<li><code>parent</code> - By default, the line is added to <code>display.currentStage</code> group, but you can specify a another group with this argument.</li>
<li><code>xOffset</code> (<code>0</code>) - The label's x-position is <code>obj.x + xOffset</code>.</li>
<li><code>yOffset</code> (<code>0</code>) - The label's y-position is <code>obj.y + yOffset</code>.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="lua">ssk.actions.target.drawDebugAngleDistanceLabel( self, { yOffset = 40 } )
</code></pre>

<hr />
<p><img alt="RoamingGamer" src="../..\roaming_gamer_small.png" />  Copyright &copy; Roaming Gamer, LLC. 2008-2016; All Rights Reserved </p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
