<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Roaming Gamer, LLC. Patcher Documentation">  
    <link rel="canonical" href="https://roaminggamer.github.io/RGDocs/pages/patcher/"> 
    <link rel="shortcut icon" href="./img/favicon.ico">

    <title>Patcher</title>

    <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="./css/base.css" rel="stylesheet">
    <link href="./css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body class="homepage" >

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href=".">Patcher</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="active">
                        <a href=".">About</a>
                    </li>
                
                
                
                    <li >
                        <a href="ssk2/">SSK2</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li class="disabled">
                        <a rel="next" >
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="ssk2/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#patcher">Patcher</a></li>
        
    
        <li class="first-level "><a href="#basic-usage">Basic Usage</a></li>
        
            <li class="third-level"><a href="#a-activate-plugin">A. Activate Plugin</a></li>
        
            <li class="third-level"><a href="#b-update-buildsettings">B. Update build.settings</a></li>
        
            <li class="third-level"><a href="#c-enable-patcher">C. Enable Patcher</a></li>
        
    
        <li class="first-level "><a href="#docs-index">Docs Index</a></li>
        
            <li class="third-level"><a href="#initialization">Initialization</a></li>
        
            <li class="third-level"><a href="#settings">Settings</a></li>
        
            <li class="third-level"><a href="#patching">Patching</a></li>
        
            <li class="third-level"><a href="#utilities">Utilities</a></li>
        
            <li class="third-level"><a href="#helpers">Helpers</a></li>
        
    
        <li class="first-level "><a href="#complete-example">Complete Example</a></li>
        
            <li class="third-level"><a href="#buildsettings">build.settings</a></li>
        
            <li class="third-level"><a href="#mainlua">main.lua</a></li>
        
            <li class="third-level"><a href="#scriptsmymodulelua">scripts/myModule.lua</a></li>
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="patcher">Patcher</h1>
<blockquote>
<p><em>Patcher</em> is a plugin that allows you to execute downloaded scripts as if they were part of your app/game distribution.</p>
</blockquote>
<p>Have you ever wondered, "Is there a drop-dead easy way to download and execute scripts in my released app/game?"  </p>
<p>If so, the answer is, "Yes!".</p>
<p>With patcher you can download scripts to effectively supercede scripts bundled with your app.  You can also download new code and execute it.</p>
<hr />
<h1 id="basic-usage">Basic Usage</h1>
<h3 id="a-activate-plugin">A. Activate Plugin</h3>
<p>First, purchase the plugin on <a href="https://marketplace.coronalabs.com/plugin/patcher">Corona Marketplace</a> to activate it.</p>
<h3 id="b-update-buildsettings">B. Update build.settings</h3>
<p>Second, ensure your build.settings file has this code in it:</p>
<pre><code>settings =
{
    plugins =
    {
        [&quot;plugin.patcher&quot;] = { publisherId = &quot;com.roaminggamer&quot; },
    },      
}
</code></pre>

<h3 id="c-enable-patcher">C. Enable Patcher</h3>
<p>Once you have downloaded replacement scripts you can enable it by doing this at the very top of <strong>main.lua</strong>.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;
patcher.export()
</code></pre>

<p>Now, you can use the <code>require()</code> function as you normally would and any 'downloaded scripts' will automatically be used in place of the ones in the <em>system.ResourceDirectory</em>.</p>
<p>(Please see the <a href="#docs-index">Docs</a> below for more details.)</p>
<hr />
<h1 id="docs-index">Docs Index</h1>
<p>Alphabetical Function Index </p>
<table>
<thead>
<tr>
<th align="left">Function</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="#caching-en">patcher.caching</a></td>
<td align="left">This function allows you to enable/disable script caching.</td>
</tr>
<tr>
<td align="left"><a href="#debug-en">patcher.debug</a></td>
<td align="left">This feature allows you to enable/debug verbose debug messaging.</td>
</tr>
<tr>
<td align="left"><a href="#dump">patcher.dump</a></td>
<td align="left">This feature dumps a list of all cached scripts to the console (if verbose mode enabled).  It also returns a alphabetically sorted table listing the the script names.</td>
</tr>
<tr>
<td align="left"><a href="#enabled-en">patcher.enabled</a></td>
<td align="left">This function allows you to enable and disable patching without purging or removing patches.</td>
</tr>
<tr>
<td align="left"><a href="#export">patcher.export</a></td>
<td align="left">This function allows you to replace the global <code>require()</code> function with <a href="#require"><code>patcher.require()</code></a>.</td>
</tr>
<tr>
<td align="left"><a href="#get-src-dst-onsuccess-onfail-onprogress">patcher.get</a></td>
<td align="left">This is a helper function that allows you download scripts to the correct path and file for superceding existing scripts.</td>
</tr>
<tr>
<td align="left"><a href="#getsettings">patcher.getSettings</a></td>
<td align="left">Returns a table of the current settings ( caching, enabled, verbose) and their values.</td>
</tr>
<tr>
<td align="left"><a href="#mkfolder-path">patcher.mkFolder</a></td>
<td align="left">This helper function can be used to create any folders you need prior to generating or downloading scripts in the system.DocumentsDirectory.</td>
</tr>
<tr>
<td align="left"><a href="#patched-path">patcher.patched</a></td>
<td align="left">Returns <code>true</code> if the named script has been patched.</td>
</tr>
<tr>
<td align="left"><a href="#purge-path">patcher.purge</a></td>
<td align="left">Allows you to purge a single named script, or all scripts if no specific script is specfied.</td>
</tr>
<tr>
<td align="left"><a href="#reset">patcher.reset</a></td>
<td align="left">This function restores the global <code>_G.require()</code> reference to the standard function.</td>
</tr>
<tr>
<td align="left"><a href="#remove-path">patcher.remove</a></td>
<td align="left">This function deletes a named patch (script) from the specified system.DocumentsDirectory folder.</td>
</tr>
<tr>
<td align="left"><a href="#require-path">patcher.require</a></td>
<td align="left">This is the replacement for Corona's standard <code>require()</code> function</td>
</tr>
<tr>
<td align="left"><a href="#write-script-path">patcher.write</a></td>
<td align="left">This helper function allows you to write a script to a specific location in the system.DocumentsDirectory.</td>
</tr>
</tbody>
</table>
<h2 id="initialization">Initialization</h2>
<h3 id="export">export()</h3>
<p>Replaces the global <code>require()</code> function with <a href="#require"><code>patcher.require()</code></a>.</p>
<p><em>Tip:</em> This should be done ONCE at the very top of <strong>main.lua</strong>.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;
patcher.export()

-- Now, all future calls to require() will use the patcher version of this function.
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h3 id="reset">reset()</h3>
<p>Restore the global reference to the standard function <code>_G.require()</code>.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;
patcher.reset()

-- Now, all future calls to require() will use the original version of this function.
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h2 id="settings">Settings</h2>
<h3 id="caching-en">caching( [ en ] )</h3>
<ul>
<li><code>en</code>  - <code>true</code> to enable; <code>false</code> to disable.  Caching is enabled by default.</li>
</ul>
<p>Tip: While caching is disabled, scripts are re-evaluated on each require().  This still updates the cache.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;
patcher.caching( false ) -- Disable patching

-- Now, all future calls to require() will reload scripts from file.
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h3 id="debug-en">debug( [ en ] )</h3>
<ul>
<li><code>en</code>  - <code>true</code> to enable verbose debug messaging; <code>false</code> to disable verbose debug messaging.  Verbose mode is diasbled by default.</li>
</ul>
<pre><code>local patcher = require &quot;plugin.patcher&quot;
patcher.debug( true ) -- Turn on 'verbose' debug output for this plugin.
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h3 id="enabled-en">enabled( [ en ] )</h3>
<ul>
<li><code>en</code>  - <code>true</code> to enable; <code>false</code> to disable.  Patching is enabled by default.</li>
</ul>
<pre><code>local patcher = require &quot;plugin.patcher&quot;
patcher.enabled( false ) -- Disable patching

-- Now, all future calls to require() will return references to original scripts.
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h3 id="getsettings">getSettings()</h3>
<p>Returns a table containing the names and values of the current settings: caching, enabled, verbose.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;
local patcherSettings = patcher.getSettings()
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h2 id="patching">Patching</h2>
<p><em>Patching</em> is a fancy way of saying, we are going to generate or download a script into the system.DocumentsFolder and then use it instead of a script we have in the system.ResourceDirectory.  </p>
<p>This plugin also allows you to generate/download new scripts that were never part of your original app, thus extending it.</p>
<h3 id="require-path">require( path )</h3>
<ul>
<li><code>path</code>  - Path to script (minus lua extension) just like a normal call to require</li>
</ul>
<pre><code>local patcher = require &quot;plugin.patcher&quot;

-- Load the patched version of 'myModule' if it is in system.DocumentsDirectory:
-- &gt;&gt; scripts/myModule.lua 
-- 
-- Alternately, if no file is found use the original script.
--
local myModule = patcher.require( &quot;scripts.myModule&quot; )

</code></pre>

<p><em>Tip</em>:  While are free to use the long-hand version of this, it is far better and easier to simply <a href="#export">export</a> patcher's replacement function and then call <code>require()</code> as you normally would.</p>
<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h2 id="utilities">Utilities</h2>
<h3 id="dump">dump( )</h3>
<p>If <a href="#debug-en">verbose debugging</a> mode is enable, this will print a list of patched scripts to the console.</p>
<p>This always returns an alphabetized table of the patched script names too.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;
local patchedList = patcher.dump() 
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h3 id="patched-path">patched( path )</h3>
<ul>
<li><code>path</code>  - Normal path to a script.</li>
</ul>
<p>Returns <code>true</code> if the specified script has been patched and stored in the patcher's cache.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;
local isPatched = patcher.patched( &quot;scripts.myModule&quot; )
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h3 id="purge-path">purge( [ path ] )</h3>
<ul>
<li><code>path</code>  - An optional path to a script to purge from the patcher's cache.</li>
</ul>
<pre><code>local patcher = require &quot;plugin.patcher&quot;

-- Purge a single script:
--
patcher.purge( &quot;scripts.myModule&quot; )

-- Purge entire cache:
--
patcher.purge( )
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h3 id="remove-path">remove( path )</h3>
<ul>
<li><code>path</code>  - Normal path to a script. </li>
</ul>
<p>Deletes a file if found at the specified path (assumes the file is a .lua script).</p>
<p><em>Warning!</em>: Do not use this as some kind of general file helper.  It should only be used for patch files.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;

-- Delete the patch for `myModule.lua`
--
patcher.remove( &quot;scripts.myModule&quot; )

</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h2 id="helpers">Helpers</h2>
<h3 id="get-src-dst-onsuccess-onfail-onprogress">get( src, dst [, onSuccess [, onFail [, onProgress ]]] )</h3>
<ul>
<li><code>src</code>  - Full http: or https: path to script.</li>
<li>dst - Normal path to script as you would specify for <code>require()</code> calls.</li>
<li><code>onSuccess</code> - An optional function that is called when the file is 'successfully' downloaded.</li>
<li><code>onFail</code> - An optional function that is called when the file fails to download.</li>
<li><code>onProgress</code> - An optional function that is called when the file is downloading.  This can be used to give 'progress' feedback if you need it.  Most people will not use this.</li>
</ul>
<p><em>Warning!</em>: Do not use this as some kind of general file download helper.  It should only be used for patch files.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;

-- Download a patch for 'myModule.lua'
--
local testPatch = &quot;https://raw.githubusercontent.com/roaminggamer/RG_FreeStuff/master/myPluginSamples/patcher/myModule.lua&quot;

local function onSuccess( event )
    print(&quot;Success!&quot;)
end

local function onFail( event )
    print(&quot;Failure!&quot;)
    for k,v in pairs(event) do
        print(k,v)
    end
end

patcher.get( testPatch, &quot;scripts.myModule&quot;, onSuccess, onFail )
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h3 id="write-script-path">write( script, path )</h3>
<ul>
<li><code>script</code>  - A lua standard script (usually a module).</li>
<li><code>path</code>  - Normal path to script as you would specify for <code>require()</code> calls.</li>
</ul>
<p>While the typical usage for patcher is to download scripts, there is no reason why you can generate them locally.  This helper gives you an easy way to save those 'generated' scripts.</p>
<p><em>Tip:</em> Remember to make any folders you need before attempting to write scripts to them.</p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;

local patchedScript = 
    &quot;local m = {}\n&quot; ..
    &quot;local cx,cy = display.contentCenterX, display.contentCenterY\n&quot; ..
    &quot;local mRand = math.random\n&quot; ..
    &quot;function m.run( group )\n&quot; ..
    &quot;   local tmp = display.newRect( group, cx + mRand(-200,200), cy + mRand(-20,80), 40, 40 )\n&quot; ..
    &quot;   tmp:setFillColor(1,mRand(),mRand())\n&quot; ..
    &quot;display.newText( group, 'patch v2 - scripts.myModule', cx, cy + 160,  'Lato-Black.ttf', 22 )\n&quot; ..
    &quot;end\n&quot; ..
    &quot;return m&quot;

patcher.mkFolder( &quot;scripts&quot; )

patcher.write( patchedScript, &quot;scripts.myModule&quot; )

</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h3 id="mkfolder-path">mkFolder( path )</h3>
<ul>
<li><code>path</code>  - A standard file path as you would specify it for regular file operations.</li>
</ul>
<p><em>Warning!</em> This is the only case in patcher where paths are specified using forward slashes if needed.  </p>
<pre><code>local patcher = require &quot;plugin.patcher&quot;

-- Make a scripts folder and a sub-folder 'other' in scripts
--
patcher.mkFolder( &quot;scripts&quot; )
patcher.mkFolder( &quot;scripts/other&quot; )
</code></pre>

<p><a href="#docs-index"><em>index &uarr;</em></a></p>
<h1 id="complete-example">Complete Example</h1>
<p>You can download a complete example that tests the features of the plugin here:</p>
<p><a href="https://github.com/roaminggamer/RG_FreeStuff/raw/master/myPluginSamples/patcher/patcher-example.zip">patcher-example.zip</a></p>
<h3 id="buildsettings">build.settings</h3>
<pre><code>-- =============================================================
-- https://docs.coronalabs.com/daily/guide/distribution/buildSettings/index.html
-- https://docs.coronalabs.com/daily/guide/tvos/index.html
-- https://docs.coronalabs.com/daily/guide/distribution/win32Build/index.html
-- https://docs.coronalabs.com/daily/guide/distribution/osxBuild/index.html
-- =============================================================
local orientation = 'portrait' -- portrait, landscapeRight, ...
settings = {
-------------------------------------------------------------------------------
--  Orientation Settings 
-------------------------------------------------------------------------------
   orientation = {
      default     = orientation,
      supported   = { orientation },
   },
    android =
   {
      usesPermissions =
      {
         &quot;android.permission.INTERNET&quot;,
      },
   },
   iphone =
    {
        plist =
        {
            UIStatusBarHidden = false,
            CFBundleIconFiles =
            {
                &quot;Icon-40.png&quot;,
                &quot;Icon-58.png&quot;,
                &quot;Icon-76.png&quot;,
                &quot;Icon-80.png&quot;,
                &quot;Icon-87.png&quot;,
                &quot;Icon-120.png&quot;,
                &quot;Icon-152.png&quot;,
                &quot;Icon-167.png&quot;,
                &quot;Icon-180.png&quot;,
            },
        },
    },
}
</code></pre>

<h3 id="mainlua">main.lua</h3>
<pre><code>-- =============================================================
io.output():setvbuf(&quot;no&quot;)
display.setStatusBar(display.HiddenStatusBar)
-- =============================================================
-- Code To Create Example Buttons ++
-- =============================================================
local widget = require( &quot;widget&quot; )
widget.setTheme( &quot;widget_theme_ios&quot; )
--widget.setTheme( &quot;widget_theme_android_holo_light&quot; )
--widget.setTheme( &quot;widget_theme_android_holo_dark&quot; )
--
local cx,cy = display.contentCenterX, display.contentCenterY
local uw = display.actualContentWidth - display.contentWidth
local uh = display.actualContentHeight - display.contentHeight
local left = (uw == 0) and 0 or (0 - uw/2)
local right = left + display.actualContentWidth
local top = (uh == 0) and 0 or (0 - uh/2)
local bottom = top + display.actualContentHeight
--
local group 
--
local myModule
--
local bw = 200
local bh = 30
local bh2 = 80
local function makeButton( x, y, text, action )
    local button = display.newRect( x, y, bw, bh )
    button:setFillColor(1,1,1,0.1)
    button:setStrokeColor(1,1,1,0.5)
    button.strokeWidth = 2
    button.label = display.newText( text, x, y,  &quot;Lato-Black.ttf&quot;, 16 )
    button.action = action or function() end
    function button.touch( self, event )
        if( event.phase == &quot;ended&quot; ) then 
            self:setStrokeColor(0.5,1,0.5,1)
            timer.performWithDelay( 60, 
                function() 
                    self:setStrokeColor(1,1,1,0.5)
                    self.action()
                end )       
        end
        return true
    end
    button:addEventListener(&quot;touch&quot;)
    return button
end
--
local function makeToggleButton( x, y, text1, text2, text3, offAction, onAction )
    local topLabel = display.newText( text1, x, y, &quot;Lato-Black.ttf&quot;, 22 )

    -- Question: why is the logic opposite?  Bug in widget.*?
    local function listener( event )
        if( event.target.isOn ) then
            offAction()
        else
            onAction()
        end
    end

    -- Create a default on/off switch (using widget.setTheme)
    local button = widget.newSwitch 
    {
        x = x,
        y =  y,
        onRelease = listener,
    }
    button.x = x
    button.y = topLabel.y + topLabel.contentHeight/2 + button.contentHeight/2

    local onLabel = display.newText( text2, button.x + button.contentWidth/2 + 10, button.y, &quot;Lato-Black.ttf&quot;, 18 )
    onLabel.anchorX = 0
    onLabel:setTextColor(0,1,0)
    local offLabel = display.newText( text3, button.x - button.contentWidth/2 - 10, button.y, &quot;Lato-Black.ttf&quot;, 18 )
    offLabel.anchorX = 1
    offLabel:setTextColor(1,0,0)

    return button
end
--
local function easyAlert( title, msg, buttons )
    buttons = buttons or { {&quot;OK&quot;} }
    local function onComplete( event )
        local action = event.action
        local index = event.index
        if( action == &quot;clicked&quot; ) then
            local func = buttons[index][2]
            if( func ) then func() end 
        end
    end
    local names = {}
    for i = 1, #buttons do
        names[i] = buttons[i][1]
    end
    local alert = native.showAlert( title, msg, names, onComplete )
    return alert
end

-- =============================================================
--  Load patcher and start disabled, quiet, etc.
-- =============================================================
local patcher = require &quot;plugin.patcher&quot;
patcher.debug(false)
patcher.enabled(false)
patcher.caching(false)

-- =============================================================
--  Patcher Tests
-- =============================================================
local function createTestPatch()
    local patchedScript = 
        &quot;local m = {}\n&quot; ..
        &quot;local cx,cy = display.contentCenterX, display.contentCenterY\n&quot; ..
        &quot;local mRand = math.random\n&quot; ..
        &quot;function m.run( group )\n&quot; ..
        &quot;   local tmp = display.newRect( group, cx + mRand(-200,200), cy + mRand(-20,80), 120, 120 )\n&quot; ..
        &quot;   tmp:setFillColor(1,mRand(),mRand())\n&quot; ..
        &quot;display.newText( group, 'patch v1 - scripts.myModule', cx, cy + 160,  'Lato-Black.ttf', 22 )\n&quot; ..
        &quot;end\n&quot; ..
        &quot;return m&quot;
    patcher.mkFolder( &quot;scripts&quot; )
    patcher.write( patchedScript, &quot;scripts.myModule&quot; )
end

local function createTestPatch2()
    local patchedScript = 
        &quot;local m = {}\n&quot; ..
        &quot;local cx,cy = display.contentCenterX, display.contentCenterY\n&quot; ..
        &quot;local mRand = math.random\n&quot; ..
        &quot;function m.run( group )\n&quot; ..
        &quot;   local tmp = display.newRect( group, cx + mRand(-200,200), cy + mRand(-20,80), 40, 40 )\n&quot; ..
        &quot;   tmp:setFillColor(1,mRand(),mRand())\n&quot; ..
        &quot;display.newText( group, 'patch v2 - scripts.myModule', cx, cy + 160,  'Lato-Black.ttf', 22 )\n&quot; ..
        &quot;end\n&quot; ..
        &quot;return m&quot;
    patcher.mkFolder( &quot;scripts&quot; )
    patcher.write( patchedScript, &quot;scripts.myModule&quot; )
end

local function downloadPatch()
    patcher.mkFolder( &quot;scripts&quot; )
    local function onSuccess( event )
        easyAlert(&quot;Success&quot;, &quot;Patch downloaded!&quot; )
    end
    local function onFail( event )
        easyAlert(&quot;Failure&quot;, &quot;Patch not downloaded?\n\nSee console&quot; )
        for k,v in pairs(event) do
            print(k,v)
        end
    end
    local function onProgress( event )
        --for k,v in pairs(event) do
            --print(k,v)
        --end
    end

    local testPatch = &quot;https://raw.githubusercontent.com/roaminggamer/RG_FreeStuff/master/myPluginSamples/patcher/myModule.lua&quot;
    patcher.get( testPatch, &quot;scripts.myModule&quot;, onSuccess, onFail, onProgress )
end

local function destroyPatch()
    patcher.remove( &quot;scripts.myModule&quot; )
end

local function loadMyModule()
    myModule = require &quot;scripts.myModule&quot;
end

local function testMyModule()
    if( not myModule ) then return end
    display.remove(group)
    group = display.newGroup()
    myModule.run( group )
end

local function printPatcherSettings()
    local settings = patcher.getSettings()

    print(&quot;=============================&quot;)
    for k,v in pairs(settings) do
        print(k,v)
    end
    print(&quot;=============================\n&quot;)
end


-- =============================================================
--  Create Buttons to Run Tests
-- =============================================================
local by = top + 20
local button = makeToggleButton( cx, by, &quot;require() using&quot;, &quot;patcher.require()&quot;, &quot;_G.require()&quot;,
                   function() patcher.export() end,
                   function() patcher.reset() end )
by = by + bh2

local button = makeToggleButton( cx, by, &quot;patcher.enabled()&quot;, &quot;true&quot;, &quot;false&quot;,
                   function() patcher.enabled(true) end,
                   function() patcher.enabled(false) end )
by = by + bh2

local button = makeToggleButton( cx, by, &quot;patcher.debug()&quot;, &quot;true&quot;, &quot;false&quot;,
                   function() patcher.debug(true) end,
                   function() patcher.debug(false) end )
by = by + bh2

local button = makeToggleButton( cx, by, &quot;patcher.caching()&quot;, &quot;true&quot;, &quot;false&quot;,
                   function() patcher.caching(true) end,
                   function() patcher.caching(false) end )
by = by + bh2

makeButton( cx, by, &quot;Print Patcher Settings&quot;, printPatcherSettings )

by = bottom - 240
local bx = cx - 200
makeButton( bx, by, &quot;Create Patch File v1&quot;, createTestPatch ); by = by + bh + 10
makeButton( bx, by, &quot;Create Patch File v2&quot;, createTestPatch2 ); by = by + bh + 10
makeButton( bx, by, &quot;Download Patch File v3&quot;, downloadPatch ); by = by + bh * 3

makeButton( bx, by, &quot;Destroy Patch File&quot;, destroyPatch )

by = bottom - 240
local bx = cx + 200
makeButton( bx, by, &quot;Dump Cache&quot;, function() patcher.dump() end); by = by + bh + 10
makeButton( bx, by, &quot;Purge Cache&quot;, function() patcher.purge() end ); by = by + bh * 3

makeButton( bx, by, &quot;Load Module&quot;, loadMyModule ); by = by + bh + 10
makeButton( bx, by, &quot;Test Module&quot;, testMyModule ); by = by + bh * 3

</code></pre>

<h3 id="scriptsmymodulelua">scripts/myModule.lua</h3>
<pre><code>local m = {}
local cx,cy = display.contentCenterX, display.contentCenterY
local mRand = math.random
function m.run( group )
    local tmp = display.newCircle( group, cx + mRand(-200,200), cy + mRand(-20,80), 60 )
    tmp:setFillColor(1,mRand(),mRand())
    display.newText( group, 'original - scripts.myModule', cx, cy + 160,  'Lato-Black.ttf', 22 )
end
return m
</code></pre>

<hr />
<p><img alt="RoamingGamer" src="./images/roaming_gamer_small.png" />  Copyright &copy; Roaming Gamer, LLC. 2008-2017; All Rights Reserved </p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="./js/jquery-1.10.2.min.js"></script>
    <script src="./js/bootstrap-3.0.3.min.js"></script>
    <script src="./js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '.';
    </script>
    <script data-main="./mkdocs/js/search.js" src="./mkdocs/js/require.js"></script>
    <script src="./js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>

<!--
MkDocs version : 0.16.3
Build Date UTC : 2017-10-14 18:38:16
-->
